
CREATE PROCEDURE [dbo].[GetClientList]
	@elt_account_number decimal,
	@startIndex int=0,
	@endIndex int=0,
	@filter nvarchar(50) =''
AS
BEGIN
	 SELECT * FROM (SELECT [elt_account_number]
      ,[org_account_number]
      , CASE WHEN isnull(class_code,'') = '' THEN dba_name
        ELSE dba_name + '[' + RTRIM(LTRIM(isnull(class_code,''))) + ']' END as dba_name
      ,[class_code]
      ,[isFrequently]
      ,[business_legal_name]
      ,[business_fed_taxid]
      ,[business_address]
      ,[business_address2]
      ,[business_address3]
      ,[business_city]
      ,[business_state]
      ,[business_zip]
      ,[business_country]
      ,[b_country_code]
      ,[business_phone]
      ,[business_phone_ext]
      ,[business_phone_mask]
      ,[business_phone2]
      ,[business_phone2_ext]
      ,[business_phone2_mask]
      ,[business_fax]
      ,[business_fax_mask]
      ,[business_url]
      ,[web_login_id]
      ,[web_login_pin]
      ,[owner_lname]
      ,[owner_fname]
      ,[owner_mname]
      ,[owner_title]
      ,[owner_departm]
      ,[owner_mail_address]
      ,[owner_mail_address2]
      ,[owner_mail_address3]
      ,[owner_mail_city]
      ,[owner_mail_state]
      ,[owner_mail_zip]
      ,[owner_mail_country]
      ,[owner_phone]
      ,[owner_phone_mask]
      ,[owner_email]
      ,[attn_name]
      ,[notify_name]
      ,[agent_elt_acct]
      ,[edt]
      ,[iata_code]
      ,[carrier_code]
      ,[carrier_id]
      ,[carrier_type]
      ,[account_status]
      ,[comment]
      ,[comment2]
      ,[credit_amt]
      ,[bill_term]
      ,[coloader_elt_acct]
      ,[colodee_elt_acct_name]
      ,[z_bond_number]
      ,[z_bond_exp_date]
      ,[z_bond_amount]
      ,[z_bond_surety]
      ,[z_bank_name]
      ,[z_bank_account_no]
      ,[z_chl_no]
      ,[z_firm_code]
      ,[z_carrier_code]
      ,[z_carrier_prefix]
      ,[z_attn_txt]
      ,[SalesPerson]
      ,[c2FirstName]
      ,[c2MiddleName]
      ,[c2LastName]
      ,[c2Title]
      ,[c2Phone]
      ,[c2Ext]
      ,[c2Phone_mask]
      ,[c2Cell]
      ,[c2Cell_mask]
      ,[c2Fax]
      ,[c2Fax_mask]
      ,[c2Email]
      ,[c3FirstName]
      ,[c3MiddleName]
      ,[c3LastName]
      ,[c3Title]
      ,[c3Phone]
      ,[c3Phone_mask]
      ,[c3Ext]
      ,[c3Cell]
      ,[c3Cell_mask]
      ,[c3Fax]
      ,[c3Fax_mask]
      ,[c3Email]
      ,[is_shipper]
      ,[is_consignee]
      ,[is_agent]
      ,[is_vendor]
      ,[is_carrier]
      ,[is_coloader]
      ,[z_is_trucker]
      ,[z_is_special]
      ,[z_is_broker]
      ,[z_is_warehousing]
      ,[z_is_cfs]
      ,[z_is_govt]
      ,[SubConsignee]
      ,[SubShipper]
      ,[SubAgent]
      ,[SubCarrier]
      ,[SubTrucker]
      ,[SubWarehousing]
      ,[SubCFS]
      ,[SubBroker]
      ,[SubGovt]
      ,[SubVendor]
      ,[SubSpecial]
      ,[defaultBroker]
      ,[defaultBrokerName]
      ,[broker_info]
      ,[refferedBy]
      ,[date_opened]
      ,[last_update]
      ,[acct_name]
      ,[business_st_taxid]
      ,[owner_ssn]
      ,[business_phone_mask_exp]
      ,[business_phone2_mask_exp]
      ,[business_fax_mask_exp]
      ,[owner_phone_mask_exp]
      ,[c2Phone_mask_exp]
      ,[c2Cell_mask_exp]
      ,[c2Fax_mask_exp]
      ,[c3Phone_mask_exp]
      ,[c3Cell_mask_exp]
      ,[c3Fax_mask_exp]
      ,[business_phone_mask_pre]
      ,[business_phone2_mask_pre]
      ,[business_fax_mask_pre]
      ,[owner_phone_mask_pre]
      ,[c2Phone_mask_pre]
      ,[c2Cell_mask_pre]
      ,[c2Fax_mask_pre]
      ,[c3Phone_mask_pre]
      ,[c3Cell_mask_pre]
      ,[c3Fax_mask_pre]
      ,[print_check_as]
      ,[print_check_as_info]
      ,[known_shipper]
      ,[coloader_elt_acct_name]
      ,[ICC_MC]
      ,[FF_account_no]
      ,[is_customer]
      ,[subCustomer]
      ,[OrgId]
	  ,row_number()over(order by t.dba_name) as [rn]
	   FROM [PRDDB].[dbo].[organization]
	   as t where t.dba_name LIKE @filter ) as st where st.[rn] between @startIndex and @endIndex

	   AND elt_account_number = @elt_account_number


END
